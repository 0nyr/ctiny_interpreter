# WORKLOG

* [ ] Add symbol table to be able to recognize if an identifier is defined or not ! This sould ensure `cargo run -- -p syntax-parsing -f res/invalid/invalid_program_c.ctiny` detects the unknown identifier `a` at line 6.
* [ ] Add type system with overflow checking
* [ ] Correct the .txt grammar with modifications done inside .pest PEG file.
* [ ] Add a max number of while loop !!

## Logs

### Thu 20 Jul 2023

Heavy work on operation overflow checking and basic binary operations. 

* [X] Add testing for explicit type cast interpretation.
* [X] Continue expression interpretation with UnaryExpression.
* [ ] Continue BinaryExpression interpretation.

### Wed 19 Jul 2023

Adding many tests for expression interpretation, for Literal and GetValue parts.

Completed tests for casting system between literals.

* [X] Complete ``get_variable_value``
* [X] add all necessary tests for valid and invalid type casts
* [X] ~~Rework the system of errors in the AST and in the semantic part to use the same system as introduced in the semantic part.~~ Added a `From<Error<Rule>>` for easier manipulation.
* [X] ~~Rework Literal. Define a new type Value to replace Literal in the Symbol Table.~~ Just renamed Literal to Value. This makes sense since a new type would be a perfect clone of the old Literal struct. It also make sense in the context of an interpreter. The literals are not stored in the AST as unchecked literals but as real Rust values.
* [X] Add testing for explicit type cast interpretation.
* [ ] Continue expression interpretation with UnaryExpression.

### Tue 18 Jul 2023

Started to work on type casts.

### Mon 17 Jul 2023

Started to work on interpretation. I'm starting with expression interpretation.

* [ ] Complete `interpret_expression`
* [ ] Test `interpret_expression`

### Sun 16 Jul 2023

I added the static symbol table.

I also made a PR on Pest that was merged into `master`. This PR introduce the possibility to merge Spans, which was crucial in building BinaryExpression.

* [X] Now that we have the AST and Static Symbol Table, it's time to head towards interpreting the code.

### Thu 13 Jul 2023

I have a problem with spans... I want to use pest spans... but their are immutable and it's impossible to merge two spans... This is a real problem...

I have 2 options... either I drop spans completly... not ideal, lot of rework needed... debugging very hard...

Or I declare my own mutable span... But I will need to find a way to pass the input string reference all around... The best would be a king of global variable. Ugly but no need to pass it on every function params...

Otherwise I will need to pass that to every function that need to build a Node... o_O...

### Mon 10 Jul 2023

I stayed quite a while on anoying bugs

* operator left-to-right order of pest, for `relation_operator = { "<=" | ">=" | "<" | ">" }`
* macro invocation, forgetting the `;` after macro call inside a function, causing rust to try to return the code generated by the macro as the last expression of a function in rust is an implicit return.

I worked well, 8h30 today on the project, but the statements are still unfinished so I'm a bit disapointed.

Need to debug statements with empty ";" following symbols...

### Wed 5 Jul 2023

Removing block from statements, which simplifies things a lot.

Heavy refactoring for simplifying the grammar and preparing the AST building process.

### Mon 3 Jul 2023

Added full syntax-parsing using `pest`.

I added comments and made some corrections to the grammar. I had made some mistake in function parameters and declarations that lead to ambiguities.

The `syntax_parsing` pipeline is able to perform full tokenization. Symbol table is missing though, so undefine identifier errors are not handled yet.

* [ ] Add symbol table to be able to recognize if an identifier is defined or not ! This sould ensure `cargo run -- -p syntax-parsing -f res/invalid/invalid_program_c.ctiny` detects the unknown identifier `a` at line 6.
* [ ] Correct the .txt grammar with modifications done inside .pest PEG file.

### Sat 1 Jul 2023

Started working on the Rust code. I just set up the basics of the program like CLI and pipelines.

### Fri 30 Jun 2023

Started working on the project. I created my personal version of Ctiny, following what was described as Tiny and doing some design choices.
